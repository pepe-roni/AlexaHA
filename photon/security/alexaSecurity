int pirState = LOW;    
int detected = 0;
int pirVal = 0;    
int previousDoor=0;
 
int doorStatus = 0;
  int timing = 0;
 
void setup() {
  pinMode(0, INPUT);
  Particle.variable("pir", detected);
  Particle.variable("doorStatus", doorStatus);
  Particle.variable("preDoor", previousDoor);
}
 
void loop()
{
//pir sensor
  pirVal = digitalRead(0);  
  if (pirVal == HIGH) 
  {         
    if (pirState == LOW) 
    {
      detected = 1; 
      pirState = HIGH;
    }
  } 
  else 
  {
    if (pirState == HIGH)
    {
        detected = 0;
      pirState = LOW;
    }
  }
/* door

   doorStatus = analogRead(1);
   when the door is closed, sensor returns low value, open returns insanely high values
   stop overload of 1's
   status = 1 open | status = 0 closed | status = 2 open but no return to ifttt
*/
  if(analogRead(1) > 5)
  {
      if(previousDoor>0)
      {
          delay(5000);
          doorStatus = 2;
      }
      else
      {
        doorStatus = 1;
        previousDoor = 1;
        Particle.publish("doorStatus","open");
      }
  }
  else 
  {
    doorStatus = 0; 
    previousDoor = 0;
    timing = 0;
  }
}